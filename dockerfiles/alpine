FROM docker.io/i386/alpine:3.17

# Basic CLI tools
RUN apk update && apk add --no-cache \
    bash vim nano python3 nodejs gcc openssh shadow curl zsh

# Add a non-root user
RUN useradd -m -s /bin/bash user && echo "user:password" | chpasswd && \
    echo "root:password" | chpasswd

# Set environment variables
ENV HOME=/home/user TERM=xterm SHELL=/bin/bash USER=user

# Switch to non-root user (auto-login effect)
USER user
WORKDIR /home/user

# Start Bash directly
CMD ["/bin/bash"]
