FROM docker.io/i386/alpine:3.17

# Basic CLI tools
RUN apk update && apk add --no-cache \
    zsh vim nano python3 nodejs gcc openssh shadow curl

# Add a non-root user
RUN useradd -m -s /bin/zsh user && echo "user:password" | chpasswd && \
    echo "root:password" | chpasswd

# Set environment variables
ENV HOME=/home/user TERM=xterm-256color SHELL=/bin/zsh USER=user

# Switch to non-root user (auto-login effect)
USER user
WORKDIR /home/user

# Start zsh directly
CMD ["/bin/zsh"]
