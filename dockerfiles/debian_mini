FROM docker.io/i386/alpine:3.17
# Install required packages

RUN echo -e "\n@testing https://dl-cdn.alpinelinux.org/alpine/edge/testing" >> /etc/apk/repositories
# Default DNS server
RUN echo "nameserver 8.8.8.8" > /etc/resolv.conf
RUN apk update && apk add alpine-base udev-init-scripts udev-init-scripts-openrc eudev bash
# Setup the init script
RUN rc-update add bootmisc boot && rc-update add udev sysinit && rc-update add udev-trigger sysinit && rc-update add udev-settle sysinit && rc-update add udev-postmount default
# Add a user
RUN adduser -D -s /bin/bash user && echo 'user:password' | chpasswd
# Allow root login
RUN echo 'root:password' | chpasswd

# terminal apps
RUN apk add vim python3 nodejs gcc nano openssh

# config folder
COPY --chown=user:user ./config /home/user/.config

CMD [ "/bin/sh" ]
